Clusters
========

Overview
--------

``Infrastructure > Clusters`` is for creating and managing Kubernetes Clusters, |morpheus| manager Docker Clusters, KVM Clusters, or Cloud specific Kubernetes services such as EKS, AKS and GKE.

Cluster Types
^^^^^^^^^^^^^

+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------+
| **Name**           | **Description**                                                                                                                                                                                                                  | **Provider Type**      |
+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------+
| Kubernetes Cluster | Provisions by default a Kubernetes cluster consisting of 1 Kubernetes Master and 3 Kubernetes Worker nodes. Additional system layouts available including Master clusters. Custom layouts can be created.                        | Kubernetes             |
+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------+
| Docker Cluster     | Provisions by default a Morpheus controlled Docker Cluster with 1 host. Additional hosts can be added. Custom layouts can be created. Existing Morpheus Docker Hosts are automatically converted to Clusters upon 4.0.0 upgrade. | Docker                 |
+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------+
| EKS Cluster        | Amazon EKS (Elastic Kubernetes Service) Clusters                                                                                                                                                                                 | Kubernetes             |
+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------+
| AKS Cluster        | Azure AKS (Azure Kubernets Service) Clusters                                                                                                                                                                                     | Kubernetes             |
+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------+
| KVM Cluster        | Provisions by default a Morpheus controlled KVM Cluster with 1 host. Additional hosts can be added. Custom layouts can be created. Existing Morpheus KVM Hosts are automatically converted to Clusters upon 4.0.0 upgrade.       | KVM                    |
+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------+
| KVM/Docker Cluster | Provisions by default a Morpheus controlled Docker, VM and Functions* Cluster with 1 host. Additional hosts can be added.                                                                                                        | Docker & KVM           |
+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------+
| Ext Kubernetes     | Brings an existing (brownfield) Kubernetes cluster into Morpheus                                                                                                                                                                 | Kubernetes             |
+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------+
| GKE Cluster        | Google Cloud GKE (Google Kubernetes Engine) Clusters                                                                                                                                                                             | Kubernetes             |
+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------+

.. note:: Refer to :ref:`clusterLayouts` for supported Clouds per Cluster Type.

Requirements
------------

- Morpheus Role permission ``Infrastructure: Clusters > Full`` required for Viewing, Creating, Editing and Deleting Clusters.
- Morpheus Role permission ``Infrastructure: Clusters > Read`` required for Viewing Cluster list and detail pages.

Cluster Permissions
-------------------

- Cluster Permissions
    Each Cluster has Group, Tenant and Service Plan access permissions settings ("MORE" > Permissions on the Clusters list page).
- Namespace Permissions
    Individual Namespaces also have Group, Tenant and Service Plan access permissions settings

.. _clusterLayouts:

System Cluster Layouts
----------------------

System (|morpheus| provided) Cluster Layouts at time of |morphver| release. Note: AKS & GKE Kubernetes versions will dynamically update to the providers supported versions.

+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| name                                                         | description                                                                            | code                                                      |
+==============================================================+========================================================================================+===========================================================+
| Alibaba Docker Host                                          | This will provision a single docker host vm in alibaba                                 | docker-alibaba-ubuntu-16.04-single                        |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Amazon Docker Host                                           | This will provision a single docker host vm in amazon                                  | docker-amazon-ubuntu-16.04-single                         |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Azure Docker Host                                            | This will provision a single docker host vm in azure                                   | docker-azure-ubuntu-16.04-single                          |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Copy of MKS Kubernetes 1.20 Cluster on   Ubuntu 18.04        | provision a kubernetes 1.20 cluster on ubuntu 18.04                                    | 2ec05df7-f610-4eef-be1d-d067bba907db                      |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Copy of VMware Docker CentOS 7.5                             | This will provision a single docker host vm in vmware                                  | c54206be-c4d4-4062-a7f6-c3415e7d321f                      |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Digital Ocean Docker Host                                    | This will provision a single docker host vm in digitalOcean                            | docker-digitalOcean-ubuntu-16.04-single                   |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Docker Cluster on Ubuntu 18.04                               | provision a docker cluster on ubuntu 18.04 in fusion                                   | docker-ubuntu-18.04.2-fusion-amd64-single                 |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Docker on Bare Metal                                         | This will provision a single docker host                                               | docker-morpheus-metal-ubuntu-16.04-single                 |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Docker on Linux                                              | This will add a single docker host                                                     | manual-linux-docker-morpheus-single                       |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Docker on Ubuntu 16.04                                       | This will provision a single docker host vm in fusion                                  | docker-fusion-ubuntu-16.04-single                         |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| ESXi Docker Host                                             | This will provision a single docker host vm in esxi                                    | docker-esxi-ubuntu-16.04-single                           |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| External Kubernetes 1.20                                     | Connect to an external kubernetes cluster                                              | kubernetes-external-1.20                                  |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| External Kubernetes 1.21                                     | Connect to an external kubernetes cluster.                                             | kubernetes-external-1.21                                  |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Google Docker Host                                           | This will provision a single docker host vm in google                                  | docker-google-ubuntu-16.04-single                         |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Huawei Docker Host                                           | This will provision a single docker host vm in huawei                                  | docker-huawei-ubuntu-16.04-single                         |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Hyper-V Docker Host                                          | This will provision a single docker host vm in hyperv                                  | docker-hyperv-ubuntu-16.04-single                         |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| IBM Docker Host                                              | This will provision a single docker host vm in bluemix                                 | docker-bluemix-ubuntu-16.04-single                        |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Kubernetes 1.19.11 Cluster AKS                               | This provisions a single kubernetes master in Azure                                    | kubernetes-azure-aks-1.19.11                              |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Kubernetes 1.19.13 Cluster AKS                               | This provisions a single kubernetes master in Azure                                    | kubernetes-azure-aks-1.19.13                              |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Kubernetes 1.20 Cluster EKS                                  | This will provision a single kubernetes master in amazon with weave and   openebs      | kubernetes-amazon-eks-1.20                                |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Kubernetes 1.20.7 Cluster AKS                                | This provisions a single kubernetes master in Azure                                    | kubernetes-azure-aks-1.20.7                               |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Kubernetes 1.20.9 Cluster AKS                                | This provisions a single kubernetes master in Azure                                    | kubernetes-azure-aks-1.20.9                               |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Kubernetes 1.21.1 Cluster AKS                                | This provisions a single kubernetes master in Azure                                    | kubernetes-azure-aks-1.21.1                               |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Kubernetes 1.21.2 Cluster AKS                                | This provisions a single kubernetes master in Azure                                    | kubernetes-azure-aks-1.21.2                               |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Kubernetes Cluster GKE                                       | This will provision a single kubernetes master in google                               | kubernetes-google-gke                                     |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| KVM on CentOS 7.5                                            | This will provision a single kvm host vm in fusion                                     | kvm-fusion-centos-7.5-single                              |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| KVM on CentOS 7.5                                            | This will provision a single kvm host vm in vmware                                     | kvm-vmware-centos-7.5-single                              |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| KVM on Ubuntu 16.04                                          | This will provision a single kvm host vm in fusion                                     | kvm-fusion-ubuntu-16.04-single                            |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| KVM on Ubuntu 16.04                                          | This will provision a single kvm host vm in vmware                                     | kvm-vmware-ubuntu-16.04-single                            |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 Cluster on Ubuntu   18.04                | provision a kubernetes 1.20 cluster on ubuntu 18.04                                    | kubernetes-1.20.2-ubuntu-18.04.5-amazon-amd64-single      |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 Cluster on Ubuntu   18.04                | provision a kubernetes 1.20 cluster on ubuntu 18.04 in fusion                          | kubernetes-1.20.2-ubuntu-18.04.5-fusion-amd64-single      |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 Cluster on Ubuntu   18.04                | provision a kubernetes 1.20 cluster on ubuntu 18.04                                    | kubernetes-1.20.2-ubuntu-18.04.5-google-amd64-single      |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 Cluster on Ubuntu   18.04                | provision a kubernetes 1.20 cluster on ubuntu 18.04 in hyperv                          | kubernetes-1.20.2-ubuntu-18.04.5-hyperv-amd64-single      |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 Cluster on Ubuntu   18.04                | provision a kubernetes 1.20 cluster on ubuntu 18.04 in manual                          | kubernetes-1.20.2-ubuntu-18.04.5-morpheus-amd64-single    |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 Cluster on Ubuntu   18.04                | provision a kubernetes 1.20 cluster on ubuntu 18.04                                    | kubernetes-1.20.2-ubuntu-18.04.5-nutanix-amd64-single     |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 Cluster on Ubuntu   18.04                | provision a kubernetes 1.20 cluster on ubuntu 18.04 in opentelekom                     | kubernetes-1.20.2-ubuntu-18.04.5-opentelekom-amd64-single |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 Cluster on Ubuntu   18.04                | provision a kubernetes 1.20 cluster on ubuntu 18.04 in Openstack                       | kubernetes-1.20.2-ubuntu-18.04.5-openstack-amd64-single   |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 Cluster on Ubuntu   18.04                | provision a kubernetes 1.20 cluster on ubuntu 18.04 in scvmm                           | kubernetes-1.20.2-ubuntu-18.04.5-scvmm-amd64-single       |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 Cluster on Ubuntu   18.04                | provision a kubernetes 1.20 cluster on ubuntu 18.04 in vmware                          | kubernetes-1.20.2-ubuntu-18.04.5-vmware-amd64-single      |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 Cluster on Ubuntu   18.04                | provision a kubernetes 1.20 cluster on ubuntu 18.04 in Huawei                          | kubernetes-1.20.2-ubuntu-18.04.5-huawei-amd64-single      |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 Cluster on Ubuntu   20.04                | provision a kubernetes 1.20 cluster on ubuntu 18.04 in xen                             | kubernetes-1.20.2-ubuntu-18.04.5-xen-amd64-single         |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 HA Cluster on Ubuntu   18.04             | provision a high availability kubernetes 1.20 cluster on ubuntu 18.04                  | kubernetes-1.20.2-ubuntu-18.04.5-amazon-amd64             |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 HA Cluster on Ubuntu   18.04             | provision a high availability kubernetes 1.20 cluster on ubuntu 18.04                  | kubernetes-1.20.2-ubuntu-18.04.5-google-amd64             |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 HA Cluster on Ubuntu   18.04             | provision a high availability kubernetes 1.20 cluster on ubuntu 18.04 in   hyperv      | kubernetes-1.20.2-ubuntu-18.04.5-hyperv-amd64             |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 HA Cluster on Ubuntu   18.04             | provision a high availability kubernetes 1.20 cluster on ubuntu 18.04 in   manual      | kubernetes-1.20.2-ubuntu-18.04.5-morpheus-amd64           |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 HA Cluster on Ubuntu   18.04             | provision a high availability kubernetes 1.20 cluster on ubuntu 18.04                  | kubernetes-1.20.2-ubuntu-18.04.5-nutanix-amd64            |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 HA Cluster on Ubuntu   18.04             | provision a high availability kubernetes 1.20 cluster on ubuntu 18.04 in   opentelekom | kubernetes-1.20.2-ubuntu-18.04.5-opentelekom-amd64        |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 HA Cluster on Ubuntu   18.04             | provision a high availability kubernetes 1.20 cluster on ubuntu 18.04 in   Openstack   | kubernetes-1.20.2-ubuntu-18.04.5-openstack-amd64          |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.20 HA Cluster on Ubuntu   18.04             | provision a high availability kubernetes 1.20 cluster on ubuntu 18.04 in   vmware      | kubernetes-1.20.2-ubuntu-18.04.5-vmware-amd64             |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| MKS Kubernetes 1.21 Cluster on Ubuntu   20.04                | provision a kubernetes 1.21 cluster on ubuntu 20.04 in fusion                          | kubernetes-1.21.3-ubuntu-20.04.1-fusion-amd64-single      |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Morpheus KVM and Container Cluster                           | This will add a KVM and container host                                                 | morpheus-kvm-combo-cluster                                |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Morpheus KVM CentOS Cluster                                  | This will add a KVM CentOS host                                                        | morpheus-kvm-centos-cluster                               |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Morpheus KVM Ubuntu Cluster                                  | This will add a KVM Ubuntu host                                                        | morpheus-kvm-ubuntu-cluster                               |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Nutanix Docker Ubuntu 16.04                                  | This will provision a single docker host vm in nutanix                                 | docker-nutanix-ubuntu-16.04-single                        |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Open Telekom Docker Host                                     | This will provision a single docker host vm in opentelekom                             | docker-opentelekom-ubuntu-16.04-single                    |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| OpenStack Docker Host                                        | This will provision a single docker host vm in openstack                               | docker-openstack-ubuntu-16.04-single                      |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Oracle Cloud Docker Host                                     | This will provision a single docker host vm in oraclecloud                             | docker-oraclecloud-ubuntu-16.04-single                    |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| SCVMM Docker Host                                            | This will provision a single docker host vm in scvmm                                   | docker-scvmm-ubuntu-16.04-single                          |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| SoftLayer Docker Host                                        | This will provision a single docker host vm in softlayer                               | docker-softlayer-ubuntu-16.04-single                      |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| UpCloud Docker Host                                          | This will provision a single docker host vm in upcloud                                 | docker-upcloud-ubuntu-16.04-single                        |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| VCD Docker Host                                              | This will provision a single docker host vm in vcd                                     | docker-vcd-ubuntu-16.04-single                            |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| VMware Docker CentOS 7.5                                     | This will provision a single docker host vm in vmware                                  | docker-vmware-centos-7.5-single                           |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| VMware Docker Ubuntu 16.04                                   | This will provision a single docker host vm in vmware                                  | docker-vmware-ubuntu-16.04-single                         |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+
| Xen Docker Host                                              | This will provision a single docker host vm in xen                                     | docker-xen-ubuntu-16.04-single                            |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------+


.. include:: /infrastructure/clusters/kubernetes.rst
.. include:: /infrastructure/clusters/docker.rst
.. include:: /infrastructure/clusters/eks.rst
.. include:: /infrastructure/clusters/gke.rst
